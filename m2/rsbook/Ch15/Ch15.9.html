<HTML><HEAD><TITLE>15.9 Pointers and Generic Structures</TITLE>

<meta NAME="description" CONENT="Modula-2 shareware textbook by Rick Sutcliffe; Pointers and Generic Structures">
<META NAME="Author" content="Rick Sutcliffe">
<META NAME="Copyright" content="1983-2004 Rick Sutcliffe">
<STYLE TYPE="text/css"></STYLE>
<LINK REL ="stylesheet" TYPE="text/css" HREF="../linkstyles.css" TITLE="Style">
<LINK REL ="stylesheet" TYPE="text/css" HREF="../stylesheet.css" TITLE="Style">

</HEAD>
<BODY BGCOLOR="#CCFFFF">
<SCRIPT LANGUAGE="JavaScript1.1">
<!--
function framesGO() {
// figures out the path to one directory above this document
// (where the MAIN index.html is) and puts it into theString:

theString=document.URL
theString=theString.substring(0,theString.lastIndexOf("/",theString.length - 14))
parent.window.location = theString + "/index.html?" + document.URL
}

// if this is the top frame, we'll create a link to activate some
// JavaScript to set up the frames around this document.  For more
// documentation, look at the comments in the source of the top frame
// (numberstr.html in this directory - not numberstr1.html).

if ((parent.frames.length) == 0)
{
document.write('<CENTER><A HREF=\"javascript:framesGO()\">Show outer (navigation) frames</A></CENTER><HR>')
}
else
{
if (navigator.appVersion.substring(0,1) == 3 && navigator.appName.lastIndexOf('Netscape') != -1)
{
parent.frames[0].location.replace('numberstr1.html')
// For some reason netscape 3 gets confused when it tries to run the cool JavaScript
// stuff in numberstr.html and continue to load this frame at the same time. >:-(
// So, we'll load the boring numberstr1.html instead.
}
else
{
parent.frames[0].location.replace('numberstr.html')
}
}
//-->
</SCRIPT>
<H2><B>15.9 Pointers and Generic Structures</B></H2>
<P>With all the caveats of the previous section ringing in ones ears, it scarcely seems appropriate to propose a scheme for more generic data types that uses even more pointers than thus far. However, as seen in <A HREF="Ch15.7.html">section 15.7</A>, standard Modula-2 has some limitations that need to be worked around if one is going to use structures like the list, stack, queue, and trees in the most generic way possible, that is, where the code can be written and compiled without reference to the type itself.</P>
<P>Yet another solution to the problem of making code is not to have any actual data in the data node, only its address.  If the code can be constructed to work this way, there can be some efficiencies as well, because there will be a lot of copying that can be avoided.</P>
<P>With this in mind, here is yet another attempt to make the creation and management of lists generic.  This time, only a stripped down definition module is presented, and the implementation is left to the student.  Even the comments have been removed, as they are the same as in the version found in <a href="Ch15.6.html">section 15.6</a>.</P>

<pre><B>DEFINITION</B> <B>MODULE</B> Lists;

(* Generic implementation of lists (not safely type checked) *)
(* copyright © 1995 by R. Sutcliffe *)
(* last modification 1995 03 31 *)

<B>FROM</B> SYSTEM <B>IMPORT</B>
  ADDRESS;

<B>TYPE</B>
  List;
  Operation = (insert, delete, fetchup);

<B>PROCEDURE</B> Create () : List;

<B>PROCEDURE</B> Discard (<B>VAR</B> list : List);

<B>PROCEDURE</B> Length (list : List) : <B>CARDINAL</B>;

<B>PROCEDURE</B> SetAtHead (<B>VAR</B> list : List; op : Operation);

<B>PROCEDURE</B> SetAtTail (<B>VAR</B> list : List; op : Operation);

<B>PROCEDURE</B> SetAtPos (<B>VAR</B> list : List; op : Operation; itemNum : <B>CARDINAL</B>);

<B>PROCEDURE</B> Insert (<B>VAR</B> list : List; item : ADDRESS);

<B>PROCEDURE</B> Append (<B>VAR</B> list : List; item : ADDRESS);

<B>PROCEDURE</B> Update (<B>VAR</B> list : List; item : ADDRESS);

<B>PROCEDURE</B> Fetch (list : List; <B>VAR</B> item : ADDRESS);

<B>PROCEDURE</B> Delete (<B>VAR</B> list : List);

<B>END</B> Lists.</pre>

<P>The implementation of this module is left as an exercise for the reader.</P>
<HR>
<CENTER><A HREF="../contents.html" TARGET="big_right">Contents</A>
</CENTER>
</BODY>
</HTML>